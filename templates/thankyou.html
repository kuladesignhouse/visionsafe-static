{% extends "layout.njk" %}

{% block meta %}
  <meta name="description" content="Emergency Vision Assurance System (EVAS) provides a clear space of air through which a pilot can see flight instruments and out the front windshield for landing the plane in the event of in cockpit smoke.">
{% endblock %}

{% block title %}Emergency Vision Assurance System | VisionSafe | EVAS{% endblock %}

{% block head %} 
  <script id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="0dd5556c-45da-432d-88be-726b6905f924" data-blockingmode="auto" type="text/javascript"></script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NP63652');</script>
<!-- End Google Tag Manager -->
  <!-- Global site tag (gtag.js) - Google Ads: 667333334 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=AW-667333334"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'AW-667333334');
</script>
 <!-- Bablic Translation -->
  <script src="//d.bablic.com/snippet/5d59d1d2da02cc000133255a.js?version=3.9"></script>
 <!-- End Bablic Translation -->
 
  <script>document.createElement( "picture" );</script>
  <script src="js/picturefill.min.js" class="picturefill" async="async"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400,800,900,b%7CMerriweather:300i,b,i">
  <link rel="stylesheet" href="wp-content/themes/foundations2WP/css/foundation.min2.css">
  <link rel="stylesheet" href="wp-content/themes/foundations2WP/css/wireframe-theme.min.css">
  <link rel="stylesheet" href="wp-content/themes/foundations2WP/css/main.css">
  <link rel="stylesheet" href="wp-content/themes/foundations2WP/css/additions.css">
  <link rel="stylesheet" href="https://use.typekit.net/hsf5yko.css">
  <link rel="stylesheet" href="css/newnav.css">
  <style>
    div.row.thanks {
      min-height: 80vh;
    }
    div.row.thanks > .thxtainer {
      border-radius: 6px;
      background: #f7f7f7;
      min-height: 350px;
      margin: 100px auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 25px;
      max-width: 960px;
    }
    div.row.thanks div img {
      max-width: 250px;
    }
    p.note {
      text-align: center;
      max-width: 600px;
    }
  </style>
  <!-- Responsive Slider -->
  <link href="home-slider/css/slideshow.css" rel="stylesheet">
  <script>document.createElement( "picture" );</script>
  <script src="home-slider/js/picturefill.js" class="picturefill" async="async"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,900,b">
  <link rel="stylesheet" href="home-slider/css/main.css">
  <script src="home-slider/js/jquery-1.8.2.min.js"></script>
  <script src="home-slider/js/revolver.min.js"></script>
  <script src="home-slider/js/slideshow.js"></script>
  <!-- End Responsive Slider-->

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">


<!-- Facebook Pixel Code -->
<script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '403838910076167');
  fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=403838910076167&ev=PageView&noscript=1"
/></noscript>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-38842004-1', 'auto');
  ga('send', 'pageview');

</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

  <script src="extras/current.js"></script>
<script src="extras/sub-current.js"></script>
<style>.CookieDeclaration {display: none !important;}</style>
{% endblock %}

{% block content %} 
<div class="row thanks">
  <div class="thxtainer">
    <img src="images/evas.png" />
    <div id="order-status">
      <h1>Thank you for your purchase of EVAS.</h1>
      <p>If you should have any additional questions please feel free to contact us +1(800) 441-9230.</p>        
    </div>
    <p class="note"></p>
  </div>
</div>
{% include "partials/footer.njk" %}
{% endblock %}

{% block javascript %} 
<script src="js/webflow.js" type="text/javascript"></script>
<script src="js/jquery.min.js"></script>
<script src="js/outofview.js"></script>
<script src="js/what-input.min.js"></script>
<script src="js/foundation.min.js"></script>
<script src="js/stickyactive.js"></script>
<script>$(document).foundation();</script>

<script>
function postJSON(json_payload, endpoint) {
  return new Promise(function(resolve, reject) {
    var req = new XMLHttpRequest();
    var url = "https://store.visionsafe.com" + endpoint;
    req.open("POST", url);
    req.setRequestHeader("Content-type", "application/json;charset=utf-8");

    req.onload = function() {
      if (req.status == 200) {
        resolve(req.response);
      }
      else {
        reject(Error(req.statusText));
        console.log(req.response);
      }
    };

    req.onerror = function() {
      reject(Error("Network Error"));
    };

    req.send( JSON.stringify(json_payload) );
  });
}

function showPayPalMsg() {
  const urlParams = new URLSearchParams(window.location.search);
  let paypalToken = urlParams.get('paypal');
  if(paypalToken !== null){
      var orderStatus = document.getElementById("order-status");
      if (paypalToken == 0) {
        var h1 = document.createElement("h1");
        h1.innerHTML = "Oops, payment failed.";
        var p1 = document.querySelector('.note');
        p1.innerHTML = "It looks like your order could not be paid at this time. Please try again or select a different payment option or contact us +1(800) 441-9230.";
        orderStatus.innerHTML = "";
        orderStatus.appendChild(h1);
      }
      else if (paypalToken != "") {
        var json_payload = { "session_id" : paypalToken };
        postJSON(json_payload, "/capture")
        .then(JSON.parse)
        .then(function(response) {
          if (response.hasOwnProperty("invoice")) {
            var div_1 = document.createElement("div");
            var h1 = document.createElement("h1");
            var p1 = document.createElement("p");
            var p2 = document.createElement("p");
            p2.className = "note";
            if (response.invoice["status"] === "COMPLETED") {
              div_1.className = "status success";
              h1.innerHTML = "Thank you for your purchase of EVAS " + response.invoice['name'] + ".";
              p1.innerHTML = "You successfully made a payment with PayPal.";
              p2.innerHTML = "If you should have any additional questions please feel free to contact us +1(800) 441-9230";
            }
            else {
              div_1.className = "status error";
              h1.innerHTML = "Oops, payment failed.";
              p1.innerHTML = "It looks like your order could not be paid at this time. Please try again or select a different payment option or contact us +1(800) 441-9230.";
              p2.innerHTML = "";
            }
            div_1.appendChild(h1);
            div_1.appendChild(p1);
            div_1.appendChild(p2);
            orderStatus.innerHTML = "";
            orderStatus.appendChild(div_1);
          }      
          if (response.hasOwnProperty("error")) {
            console.log(response.error);
          }
        });
      }
  }
}
document.addEventListener("DOMContentLoaded", function(){
  showPayPalMsg();
});
</script>

<!-- LinkedIn Insight Tag -->
<script type="text/javascript">
_linkedin_partner_id = "441156";
window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
window._linkedin_data_partner_ids.push(_linkedin_partner_id);
</script><script type="text/javascript">
(function(){var s = document.getElementsByTagName("script")[0];
var b = document.createElement("script");
b.type = "text/javascript";b.async = true;
b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
s.parentNode.insertBefore(b, s);})();
</script>
<noscript>
<img height="1" width="1" style="display:none;" alt="" src="https://dc.ads.linkedin.com/collect/?pid=441156&fmt=gif" />
</noscript>
<!-- End LinkedIn Insight Tag -->

<!-- Twitter universal website tag code -->
<script>
!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
// Insert Twitter Pixel ID and Standard Event data below
twq('init','o31f6');
twq('track','PageView');
</script>
<!-- End Twitter universal website tag code -->

<!-- birdseed 
<script id="io.birdseed.script-tag" type="text/javascript" src="https://app.birdseed.io/widget.js"></script><div id="birdseed-widget-container" data-token="100d60c95c9b87ccc8463ae09bb6dd61"></div>
 end birdseed -->
<script id="CookieDeclaration" src="https://consent.cookiebot.com/0dd5556c-45da-432d-88be-726b6905f924/cd.js" type="text/javascript" async></script>
{% endblock %}