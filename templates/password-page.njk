{% extends "layout.njk" %}

{% block meta %}
{% endblock %}

{% block title %}{{ html_title }}{% endblock %}

{% block head %}
	<link href="https://gmpg.org/xfn/11" rel="profile"><!-- Cookie Consent Banner -->
	<script type="text/javascript">
	 var _iub = _iub || [];
	 _iub.csConfiguration = {"applyGdprForCH":false,"askConsentAtCookiePolicyUpdate":true,"countryDetection":true,"enableFadp":true,"enableLgpd":true,"enableUspr":true,"gdprAppliesGlobally":false,"lang":"en","lgpdAppliesGlobally":false,"perPurposeConsent":true,"siteId":3317692,"cookiePolicyId":63671032, "banner":{ "acceptButtonCaptionColor":"#000000","acceptButtonColor":"#FFEC90","acceptButtonDisplay":true,"closeButtonDisplay":false,"customizeButtonDisplay":true,"explicitWithdrawal":true,"listPurposes":true,"logo":null,"position":"float-bottom-left","rejectButtonCaptionColor":"#000000","rejectButtonColor":"#FFEC90","rejectButtonDisplay":true,"showPurposesToggles":true }};
	</script>
	<script src="https://cs.iubenda.com/autoblocking/3317692.js" type="text/javascript">
	</script>
	<script src="//cdn.iubenda.com/cs/gpp/stub.js" type="text/javascript">
	</script>
	<script async charset="UTF-8" src="//cdn.iubenda.com/cs/iubenda_cs.js" type="text/javascript">
	</script><!-- End Cookie Consent Banner -->
	<!-- Google Tag Manager -->

	<script>
	(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-NP63652');
	</script><!-- End Google Tag Manager -->
	<!-- Global site tag (gtag.js) - Google Ads: 667333334 -->

	<script async src="https://www.googletagmanager.com/gtag/js?id=AW-667333334">
	</script>
	<script>
	 window.dataLayer = window.dataLayer || [];
	 function gtag(){dataLayer.push(arguments);}
	 gtag('js', new Date());

	 gtag('config', 'AW-667333334');
	</script>
	<script>
	document.createElement( "picture" );
	</script>
	<script async="async" class="picturefill" src="https://www.visionsafe.com/js/picturefill.min.js">
	</script><!-- Begin Header Links Added by Brandon G -->

	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js">
	</script>
	<script src="https://www.visionsafe.com/extras/currentwp.js">
	</script>
	<script src="https://www.visionsafe.com/extras/sub-current.js">
	</script>
	<link href="https://www.visionsafe.com/wp-content/themes/foundations2WP/css/additions.css" rel="stylesheet">
	<link href="/css/checkout.css" rel="stylesheet" type="text/css"><!-- Begin Google Analytics -->

	<script>
	     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	     })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	     ga('create', 'UA-38842004-1', 'auto');
	     ga('send', 'pageview');

	</script><!-- End Google Analytics -->
	<!-- Facebook Pixel Code -->

	<script>
	 !function(f,b,e,v,n,t,s)
	 {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
	 n.callMethod.apply(n,arguments):n.queue.push(arguments)};
	 if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
	 n.queue=[];t=b.createElement(e);t.async=!0;
	 t.src=v;s=b.getElementsByTagName(e)[0];
	 s.parentNode.insertBefore(t,s)}(window, document,'script',
	 'https://connect.facebook.net/en_US/fbevents.js');
	 fbq('init', '403838910076167');
	 fbq('track', 'PageView');
	</script><noscript><img height="1" src="https://www.facebook.com/tr?id=403838910076167&ev=PageView&noscript=1" style="display:none" width="1"></noscript><!-- End Facebook Pixel Code -->

	<style>
	.CookieDeclaration {display: none !important;}
	</style><!-- End Header Links Added by Brandon G -->
	<title>107STC-221 &#038; -222 &#8211; VisionSafe</title>
	<link href='//fonts.googleapis.com' rel='dns-prefetch'>
	<link href='//s.w.org' rel='dns-prefetch'>
	<link href="https://www.visionsafe.com/feed/" rel="alternate" title="VisionSafe &raquo; Feed" type="application/rss+xml">
	<link href="https://www.visionsafe.com/comments/feed/" rel="alternate" title="VisionSafe &raquo; Comments Feed" type="application/rss+xml">
	<script type="text/javascript">
	           window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/www.visionsafe.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.26"}};
	           !function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])?!1:!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55358,56760,9792,65039],[55358,56760,8203,9792,65039])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
	</script>
	<style type="text/css">
	img.wp-smiley,
	img.emoji {
	   display: inline !important;
	   border: none !important;
	   box-shadow: none !important;
	   height: 1em !important;
	   width: 1em !important;
	   margin: 0 .07em !important;
	   vertical-align: -0.1em !important;
	   background: none !important;
	   padding: 0 !important;
	}
	</style>
	<link href='https://www.visionsafe.com/wp-content/plugins/column-shortcodes//assets/css/shortcodes.css?ver=1.0' id='cpsh-shortcodes-css' media='all' rel='stylesheet' type='text/css'>
	<link href='https://www.visionsafe.com/wp-content/plugins/front-end-only-users/css/feu-styles.css?ver=4.9.26' id='ewd-feup-style-css' media='all' rel='stylesheet' type='text/css'>
	<link href='https://www.visionsafe.com/wp-content/plugins/front-end-only-users/css/feup-pure.css?ver=4.9.26' id='feup-yahoo-pure-css-css' media='all' rel='stylesheet' type='text/css'>
	<link href='https://www.visionsafe.com/wp-content/plugins/search-filter/style.css?ver=1' id='searchandfilter-css' media='all' rel='stylesheet' type='text/css'>
	<link href='https://www.visionsafe.com/wp-content/themes/foundations2WP/style.css?ver=4.9.26' id='foundations2wp-style-css' media='all' rel='stylesheet' type='text/css'>
	<link href='//fonts.googleapis.com/css?family=Lato%3A300%2C400%2C800%2C900%2Cb&#038;ver=4.9.26' id='foundations2wp-googlefonts-css' media='all' rel='stylesheet' type='text/css'>
	<script src='https://www.visionsafe.com/wp-includes/js/jquery/jquery.js?ver=1.12.4' type='text/javascript'>
	</script>
	<script src='https://www.visionsafe.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1' type='text/javascript'>
	</script>
	<script type='text/javascript'>
	/* <![CDATA[ */
	var ewd_feup_ajax_translations = {"mismatch_label":"Mismatch","too_short_label":"Too Short","weak_label":"Weak","good_label":"Good","strong_label":"Strong"};
	/* ]]> */
	</script>
	<script src='https://www.visionsafe.com/wp-content/plugins/front-end-only-users//js/ewd-feup-check-password-strength.js?ver=4.9.26' type='text/javascript'>
	</script>
	<link href='https://www.visionsafe.com/wp-json/' rel='https://api.w.org/'>
	<link href="https://www.visionsafe.com/xmlrpc.php?rsd" rel="EditURI" title="RSD" type="application/rsd+xml">
	<link href="https://www.visionsafe.com/wp-includes/wlwmanifest.xml" rel="wlwmanifest" type="application/wlwmanifest+xml">
	<meta content="WordPress 4.9.26" name="generator">
	<link href="https://www.visionsafe.com/107stc-221-222/" rel="canonical">
	<link href='https://www.visionsafe.com/?p=1775' rel='shortlink'>
	<link href="https://www.visionsafe.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.visionsafe.com%2F107stc-221-222%2F" rel="alternate" type="application/json+oembed">
	<link href="https://www.visionsafe.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.visionsafe.com%2F107stc-221-222%2F&#038;format=xml" rel="alternate" type="text/xml+oembed">
	<style type="text/css">
	   #category-posts-2-internal .cat-post-crop {overflow: hidden; display:inline-block}
	#category-posts-2-internal .cat-post-item img {margin: initial;}
	#category-posts-2-internal .cat-post-thumbnail {float:left;}
	</style>
	<script>
	var FEUP_Min_Pass = 3;
	</script>
	<link href="https://use.typekit.net/hsf5yko.css" rel="stylesheet">
	<link href="https://www.visionsafe.com/css/newnav.css" rel="stylesheet">
	<script>
	!function(){var e="rest.happierleads.com/v3/script?clientId=s2UKemw37VXGyEEEeapvPA&version=3.0.0",
	t=document.createElement("script");window.location.protocol.split(":")[0];
	t.src="https://"+e;var c=document.getElementsByTagName("script")[0];
	t.onload = function(){ new Happierleads.default };
	c.parentNode.insertBefore(t,c)}();
	</script>
	<script data-domain="visionsafe.com" defer src="https://plausible.io/js/plausible.js">
	</script>
	<script defer id="io.birdseed.script-tag" src="https://cdn.birdseed.io/widget.js" type="text/javascript">
	</script>
{% endblock %}

{% block content %}
	<div data-token="100d60c95c9b87ccc8463ae09bb6dd61" id="birdseed-widget-container"></div><!-- Google Tag Manager (noscript) -->
	<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-NP63652" style="display:none;visibility:hidden" width="0"></iframe></noscript> <!-- End Google Tag Manager (noscript) -->
	<div class="row headerimg-row">
		<div class="columns small-12">
			<div class="responsive-picture headerimg">
				<picture><img alt="" class="attachment-full size-full wp-post-image" height="536" sizes="(max-width: 1500px) 100vw, 1500px" src="https://www.visionsafe.com/wp-content/uploads/2017/04/plane-1030900.png" srcset="https://www.visionsafe.com/wp-content/uploads/2017/04/plane-1030900.png 1500w, https://www.visionsafe.com/wp-content/uploads/2017/04/plane-1030900-300x107.png 300w, https://www.visionsafe.com/wp-content/uploads/2017/04/plane-1030900-768x274.png 768w, https://www.visionsafe.com/wp-content/uploads/2017/04/plane-1030900-1024x366.png 1024w" width="1500"></picture>
			</div>
		</div>
	</div>
	<div class="container content-container" id="portal-item">
		<div class="row">
			<div class="columns large-10 large-offset-1 end">
				<div class="post-1775 page type-page status-publish post-password-required hentry" id="post-1775">
					<h2 class="portal-item">{{ page_title }}</h2>
					<hr>
					<div class="portal-content">
						<div id="pw-content"></div>
						<form id="password-form" class="post-password-form" onsubmit="decryptContent(event)">
							<p>This content is password protected. To view it please enter your password below:</p>
							<p>
								<label class="pass-label" for="pwbox-1775">Password: </label>
								<input name="post_password" id="pwbox-1775" type="password">
								<span>
									<a href="https://www.visionsafe.com/forget-password/" data-cmp-ab="2">forgot password?</a>
									<input type="submit" name="Enter" class="" value="Enter">
								</span>
							</p>
						</form>
						<pre id="encrypted-content" style="display:none;">{{ encrypted_content }}</pre>
					</div><!-- .entry-summary -->
				</div><!-- #post-1775 -->
			</div><!-- column -->

			<div class="columns large-4 medium-4 end nav-previous-single" id="return_url">
			  <a href="https://www.visionsafe.com/client-portal">&laquo; Return to Unit List</a>
			</div>

		</div><!-- row -->
	</div><!--Container-->
	{% include "partials/footer.njk" %}
	<div class="reveal" id="checkoutModal">
		<button aria-label="Close reveal" class="close-button" data-close="" type="button"><span aria-hidden="true">&times;</span></button>
		<div id="airload"></div>
		<h1 id="checkoutheader">Great! We'll guide you through the steps to getting your plane or fleet protected with EVAS.</h1>
		<form id="checkout" name="checkout">
			<label>Contact Information</label>
			<div class="form-input">
				<input id="fullname" name="fullname" placeholder="Full Name" required="required" type="text"> <label for="fullname">Full Name</label>
			</div>
			<div class="form-input">
				<input id="company" name="company" placeholder="Company" required="required" type="text"> <label for="company">Company</label>
			</div>
			<div class="form-input">
				<input id="phone" name="phone" placeholder="Phone" required="required" type="tel"> <label for="phone">Phone</label>
			</div>
			<div class="form-input">
				<input id="email" name="email" placeholder="Email" required="required" type="email"> <label for="email">Email</label>
			</div><label class="slct">Where is your plane or fleet registered?</label>
			<div class="form-input">
				<select name="location">
					<option selected="selected" value="0">
						Select country
					</option>
					<option value="US">
						United States
					</option>
					<option value="EU">
						European Union
					</option>
					<option value="OTHER">
						Other
					</option>
				</select>
			</div><label class="notshown" id="countrylabel">What country is your plane or fleet registered in?</label>
			{% include "partials/countries.njk" %}
			<div class="form-sub">
				<input type="submit" value="Next">
			</div>
		</form>
	</div>
	<div class="reveal" data-animation-in="fade-in" data-animation-out="fade-out" data-close-on-click="true" data-reveal="" id="msgModal">
		<div class="modal-wrap">
			<div id="msg-modal-error">
				<h2>We'll need to get you a special STC for where your aircraft is registered. We will be in touch shortly to assist with this. If you'd like to contact us please call us at 1-800-441-9230</h2>
			</div><button aria-label="Close reveal" class="close-button" data-close="" type="button"><span aria-hidden="true">&times;</span></button>
		</div>
	</div>
	<div class="reveal" data-animation-in="fade-in" data-animation-out="fade-out" data-close-on-click="true" data-reveal="" id="stripeModal">
		<div class="modal-wrap">
			<div id="msg-modal-stripe"></div>
		</div>
	</div>
{% endblock %}

{% block javascript %}
{{ super() }}
<script>
async function decryptContent(event) {
    event.preventDefault();

    const password = document.getElementById('pwbox-1775').value;
    if (!password) {
        alert("Password is required!");
        return;
    }

    const storedContent = localStorage.getItem('decryptedContent');
    if (storedContent) {
        document.getElementById('pw-content').innerHTML = storedContent;
        document.getElementById('password-form').style.display = 'none';
        return;
    }

    const encryptedContent = document.getElementById('encrypted-content').textContent;
    const encryptedData = atob(encryptedContent);
    const salt = encryptedData.slice(0, 16);
    const iv = encryptedData.slice(16, 32);
    const data = encryptedData.slice(32);

    const enc = new TextEncoder();
    const keyMaterial = await crypto.subtle.importKey(
        "raw",
        enc.encode(password),
        {name: "PBKDF2"},
        false,
        ["deriveKey"]
    );

    const key = await crypto.subtle.deriveKey(
        {
            name: "PBKDF2",
            salt: new Uint8Array(salt.match(/[\s\S]/g).map(c => c.charCodeAt(0))),
            iterations: 100000,
            hash: "SHA-256"
        },
        keyMaterial,
        {name: "AES-CBC", length: 256},
        false,
        ["decrypt"]
    );

    try {
        const decryptedContent = await crypto.subtle.decrypt(
            {
                name: "AES-CBC",
                iv: new Uint8Array(iv.match(/[\s\S]/g).map(c => c.charCodeAt(0)))
            },
            key,
            new Uint8Array(data.match(/[\s\S]/g).map(c => c.charCodeAt(0)))
        );

        const decodedContent = new TextDecoder().decode(decryptedContent);
        
        localStorage.setItem('decryptedContent', decodedContent);

        document.getElementById('pw-content').innerHTML = decodedContent;
        document.getElementById('password-form').style.display = 'none';
    } catch (e) {
        alert("Decryption failed. Incorrect password.");
    }
}

// Check for stored content on page load
window.onload = function() {
    const storedContent = localStorage.getItem('decryptedContent');
    if (storedContent) {
        document.getElementById('pw-content').innerHTML = storedContent;
        document.getElementById('password-form').style.display = 'none';
    }
};
</script>


<script src="/js/jquery.min.js">
</script> 
<script src="/js/outofview.js">
</script> 
<script src="/js/what-input.min.js">
</script> 
<script src="/js/foundation.min.js">
</script> 
<script>
$(document).foundation();
</script> 
<script src="/js/_nav.js">
</script> 
<script src="/js/checkout.js">
</script> <!-- LinkedIn Insight Tag -->
<script type="text/javascript">
_linkedin_partner_id = "441156";
window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
window._linkedin_data_partner_ids.push(_linkedin_partner_id);
</script>
<script type="text/javascript">
(function(){var s = document.getElementsByTagName("script")[0];
var b = document.createElement("script");
b.type = "text/javascript";b.async = true;
b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
s.parentNode.insertBefore(b, s);})();
</script> <noscript><img alt="" height="1" src="https://dc.ads.linkedin.com/collect/?pid=441156&fmt=gif" style="display:none;" width="1"></noscript> <!-- End LinkedIn Insight Tag -->
 <!-- Twitter universal website tag code -->
<script>
!function(e,t,n,s,u,a){e.twq||(s=e.twq=function(){s.exe?s.exe.apply(s,arguments):s.queue.push(arguments);
},s.version='1.1',s.queue=[],u=t.createElement(n),u.async=!0,u.src='//static.ads-twitter.com/uwt.js',
a=t.getElementsByTagName(n)[0],a.parentNode.insertBefore(u,a))}(window,document,'script');
// Insert Twitter Pixel ID and Standard Event data below
twq('init','o31f6');
twq('track','PageView');
</script> <!-- End Twitter universal website tag code -->
<!--
<script>window._nQc="89268975";</script>
<script async src="https://serve.albacross.com/track.js"></script>
-->
{% endblock %}